#!/bin/bash

# Author: IsmaRG99

#Colours
greenColour="\e[0;32m\033[1m"
endColour="\033[0m\e[0m"
redColour="\e[0;31m\033[1m"
blueColour="\e[0;34m\033[1m"
yellowColour="\e[0;33m\033[1m"
purpleColour="\e[0;35m\033[1m"
turquoiseColour="\e[0;36m\033[1m"
grayColour="\e[0;37m\033[1m"


animacion=( '[|]' '[/]' '[-]' '[\]' )

animar_buscar(){
	animado=1
        while [ $animado -eq 1 ]
        do
                for i in "${animacion[@]}"
                do
                        echo -ne "\r ${purpleColour}$i${endColour} ${grayColour}Buscando exploit...${endColour}"
                        sleep 0.2
                done
        done
}

animar_descargar(){
        animado=1
        while [ $animado -eq 1 ]
        do
                for i in "${animacion[@]}"
                do
                        echo -ne "\r ${purpleColour}$i${endColour} ${grayColour}Descargando exploit...${endColour}"
                        sleep 0.2
                done
        done
}




echo -e "\n ${yellowColour}[!]${endColour} ${grayColour}Introduzca nombre del exploit que desea buscar:${endColour} "
read exploitname
animar_buscar &
procesoanimar=$!
sleep 3
kill $procesoanimar

echo -e "\n ${greenColour}[✓]${endColour} ${grayColour}Exploits encontrados:${endColour} "
searchsploit $exploitname -w -t &

mostrar_exploit() {
	sleep 5
	echo -e "\n ${yellowColour}[!]${endColour} ${grayColour}Desea mostrar el exploit en pantalla?${endColour} (yes/no)" 
	read exploitenpantalla
	case $exploitenpantalla in
	yes)
		echo -e "\n ${yellowColour}[!]${endColour} ${grayColour}Introduzca URL del exploit deseado:${endColour} "
		read url
		urlmod=$(echo $url | sed 's/exploits/raw/')
		xdg-open $urlmod 1>/dev/null 2>&1
		sleep 3
		echo -e "\n ${yellowColour}[!]${endColour} ${grayColour}Quiere descargar el exploit?${endColour} (yes/no)"
		read descargarexploit
		case $descargarexploit in
		yes)
			animar_descargar &
			animardescarga=$!
			nombre_exploit=$(echo $urlmod | cut -d "/" -f 5)
			urldesc=$(echo $urlmod | sed 's/exploits/download/')
			wget $urldesc 1>/dev/null 2>&1
			sleep 2
			kill $animardescarga
			echo -e "\n ${greenColour}[✓] ${grayColour}Archivo descargado en${endColour} ${blueColour}$PWD${endColour} ${grayColour}con nombre${endColour} ${blueColour}$nombre_exploit${endColour}"

		;;
		no)
			echo -e "\n ${redColour}[✗]${endColour} ${grayColour}Saliendo...${endColour}"
		;;
		esac
	;;
	no)
		echo -e "\n ${yellowColour}[!]${endColour} ${grayColour}Quieres descargar el exploit?${endColour} (yes/no)"
		read descargarexploit
		case $descargarexploit in
		yes)
			echo -e "\n ${yellowColour}[!]${endColour} ${grayColour}Introduzca URL del exploit que desea descargar:${endColour} "
			read urldesc
			animar_descargar &
			animardescarga=$!
			wget $urldesc 1>/dev/null 2>&1
			sleep 2
			kill $animardescarga
			echo -e "\n ${greenColour}[✓]${endColour} ${grayColour}Archivo descargado en${endColour} ${blueColour}$PWD${endColour} ${grayColour}con nombre${endColour} ${blueColour}$(echo $urldesc | cut -d "/" -f 5)${endColour}"
		;;
		no)
			echo -e "\n ${redColour}[✗]${endColour} ${grayColour}Saliendo...${endColour}"
		;;
		esac
	;;
	esac
}

mostrar_exploit
